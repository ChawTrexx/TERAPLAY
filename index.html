<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WeChat Realtime Messaging</title>
<style>
  body {
    background: #0d0d0d;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 20px;
  }
  h2 { color: #00e5ff; }
  #messages {
    max-width: 600px;
    margin: 20px auto;
    background: #1c1c1c;
    padding: 10px;
    border-radius: 10px;
    overflow-y: auto;
    max-height: 400px;
  }
  .msg {
    background: #2a2a2a;
    margin: 8px;
    padding: 8px;
    border-radius: 8px;
    text-align: left;
  }
  input, button {
    padding: 10px;
    border: none;
    border-radius: 6px;
    margin: 5px;
  }
  input { width: 65%; }
  button {
    background: #00e5ff;
    color: black;
    cursor: pointer;
    font-weight: bold;
  }
</style>
</head>
<body>
  <h2>ðŸ’¬ WeChat Realtime Messaging</h2>
  <div id="messages"></div>

  <input id="msgInput" type="text" placeholder="Type your message...">
  <button id="sendBtn">Send</button>

  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
    import { getDatabase, ref, push, onChildAdded } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-database.js";

    // âœ… Your Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyA_IGhhpYGsJDy1M9VPH-NXY561BF31mgg",
      authDomain: "wechat-eee4d.firebaseapp.com",
      databaseURL: "https://wechat-eee4d-default-rtdb.firebaseio.com",
      projectId: "wechat-eee4d",
      storageBucket: "wechat-eee4d.firebasestorage.app",
      messagingSenderId: "156838661275",
      appId: "1:156838661275:web:feade0307ba5c8ee01ca3e",
      measurementId: "G-TG6TXQ0P8Y"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const messagesRef = ref(db, "messages");

    const msgInput = document.getElementById("msgInput");
    const sendBtn = document.getElementById("sendBtn");
    const messagesDiv = document.getElementById("messages");

    // Send Message
    sendBtn.onclick = () => {
      const text = msgInput.value.trim();
      if (text) {
        push(messagesRef, { text, time: Date.now() });
        msgInput.value = "";
      }
    };

    // Receive Messages (Realtime)
    onChildAdded(messagesRef, (snapshot) => {
      const data = snapshot.val();
      const div = document.createElement("div");
      div.className = "msg";
      div.textContent = data.text;
      messagesDiv.appendChild(div);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    });
  </script>
</body>
</html>
